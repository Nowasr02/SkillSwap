
<div class="profiles-layout">

  <!-- left mini-profile (example of current user) -->
  <aside class="mini-profile-card">
    <div class="mini-avatar">
      {% if request.user.is_authenticated and request.user.profile.avatar %}
        <img src="{{ request.user.profile.avatar.url }}" alt="{{ request.user.username }}">
      {% else %}
        <!-- <div class="avatar-placeholder">ðŸ‘¤</div> -->
      {% endif %}
    </div>

    <div class="mini-body">
      <h3 class="mini-username">{{ request.user.username }}</h3>

      <div class="mini-section">
        <div class="label">my skills:</div>
        <div class="badges">
          {% for us in request.user.profile.user_skills.all|slice:":4" %}
            <span class="badge available">{{ us.skill.skill }}</span>
          {% empty %}
            <span class="muted">No skills yet</span>
          {% endfor %}
        </div>
      </div>

      <div class="mini-section">
        <div class="label">want swapping with:</div>
        <div class="badges">
          {% for us in request.user.profile.user_skills.all|dictsortreversed:"proficiency"|slice:":4" %}
            {% if us.wants_skill %}
              <span class="badge wants">{{ us.skill.skill }}</span>
            {% endif %}
          {% endfor %}
        </div>
      </div>
    </div>
  </aside>

  <!-- grid of profile cards -->
  <section class="profiles-grid">
    {% for profile in profiles %}
      <article class="profile-card">
        <a class="card-link" href="{% url 'profiles:detail' profile.id %}">
          <div class="card-thumb">
            {% if profile.avatar %}
              <img src="{{ profile.avatar.url }}" alt="{{ profile.user.username }}">
            {% else %}
              <div class="thumb-placeholder"></div>
            {% endif %}
          </div>

          <div class="card-body">
            <h3 class="card-username">{{ profile.user.username }}</h3>

            <div class="card-row">
              <div class="label-small">my skills</div>
              <div class="badges">
                {% for us in profile.user_skills.all|slice:":3" %}
                  <span class="badge available">{{ us.skill.skill }}</span>
                {% empty %}
                  <span class="muted">â€”</span>
                {% endfor %}
              </div>
            </div>

            <div class="card-row">
              <div class="label-small">wants</div>
              <div class="badges">
                {% for us in profile.user_skills.all %}
                  {% if us.wants_skill %}
                    <span class="badge wants">{{ us.skill.skill }}</span>
                  {% endif %}
                {% endfor %}
              </div>
            </div>
          </div>
        </a>
      </article>
    {% empty %}
      <p>No profiles found.</p>
    {% endfor %}
  </section>

</div>
